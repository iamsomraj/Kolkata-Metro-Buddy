{"version":3,"sources":["components/Card/Card.tsx","components/Form/Form.tsx","ColorModeSwitcher.tsx","components/Header/Header.tsx","App.tsx","index.tsx"],"names":["Card","props","onClose","isCentered","isOpen","motionPreset","cardNumber","response","align","justify","balance","toFixed","lastUsedInGateOn","validUpto","variant","startLocation","endLocation","lastUsedInGateAtStn","status","colorScheme","mr","onClick","onModalClose","Form","useState","setCardNumber","isCardNumberValid","setIsCardNumberValid","balanceResponse","setBalanceResponse","isModalOpen","setIsModalOpen","isLoading","setIsLoading","closeModal","submitHandler","event","a","preventDefault","localStorage","setItem","JSON","stringify","axios","get","corsAnyWhere","params","reCardNumber","data","useEffect","cardFromStorage","getItem","parse","trim","length","isFinite","parseInt","getCardNumberFromStorage","bg","useColorModeValue","spacing","mx","maxW","py","px","fontSize","as","color","rounded","boxShadow","p","type","isInvalid","value","placeholder","onChange","target","disabled","_hover","ColorModeSwitcher","toggleColorMode","useColorMode","text","SwitchIcon","FaMoon","FaSun","size","marginLeft","icon","Header","minH","base","borderBottom","borderStyle","borderColor","textAlign","useBreakpointValue","md","fontFamily","justifySelf","App","theme","ReactDOM","render","document","getElementById"],"mappings":"wWA2GeA,EAxEmB,SAACC,GACjC,OACE,mCACE,eAAC,IAAD,CACEC,QAASD,EAAMC,QACfC,YAAU,EACVC,OAAQH,EAAMG,OACdC,aAAa,gBAJf,UAME,cAAC,IAAD,IACA,eAAC,IAAD,WACE,eAAC,IAAD,qBAAqBJ,EAAMK,cAC3B,cAAC,IAAD,IACA,cAAC,IAAD,UACGL,EAAMM,UACL,qCACE,eAAC,IAAD,CAAMC,MAAO,SAAUC,QAAS,SAAhC,UACE,cAAC,IAAD,2BACA,eAAC,IAAD,qBAAeR,EAAMM,SAASG,QAAQC,QAAQ,MAC9C,eAAC,IAAD,WACGV,EAAMM,SAASK,iBADlB,KACsC,IACnCX,EAAMM,SAASM,gBAGpB,eAAC,IAAD,CAAOC,QAAQ,SAAf,UACE,cAAC,IAAD,+BACA,cAAC,IAAD,UACE,eAAC,IAAD,WACE,cAAC,IAAD,0BACA,cAAC,IAAD,yBAGJ,eAAC,IAAD,WACE,eAAC,IAAD,WACE,cAAC,IAAD,gCACA,cAAC,IAAD,UAAKb,EAAMM,SAASQ,mBAEtB,eAAC,IAAD,WACE,cAAC,IAAD,8BACA,cAAC,IAAD,UAAKd,EAAMM,SAASS,iBAEtB,eAAC,IAAD,WACE,cAAC,IAAD,gCACA,cAAC,IAAD,UAAKf,EAAMM,SAASU,4BAGxB,cAAC,IAAD,UACE,eAAC,IAAD,WACE,cAAC,IAAD,0BACA,cAAC,IAAD,4BAIN,eAAC,IAAD,CAAOC,OAAO,UAAd,UACE,cAAC,IAAD,IADF,6FAQN,cAAC,IAAD,UACE,cAAC,IAAD,CAAQC,YAAY,OAAOC,GAAI,EAAGC,QAASpB,EAAMqB,aAAjD,8BCmEGC,EAhIQ,WACrB,MAAoCC,mBAAS,IAA7C,mBAAOlB,EAAP,KAAmBmB,EAAnB,KACA,EAAkDD,oBAAS,GAA3D,mBAAOE,EAAP,KAA0BC,EAA1B,KACA,EAA8CH,mBAC5C,MADF,mBAAOI,EAAP,KAAwBC,EAAxB,KAGA,EAAsCL,oBAAS,GAA/C,mBAAOM,EAAP,KAAoBC,EAApB,KACA,EAAkCP,oBAAS,GAA3C,mBAAOQ,EAAP,KAAkBC,EAAlB,KAOMC,EAAa,WACjBH,GAAe,IAGXI,EAAyD,uCAAG,WAChEC,GADgE,eAAAC,EAAA,yDAGhED,EAAME,kBACFZ,EAJ4D,wBAK9Da,aAAaC,QAAQ,aAAcC,KAAKC,UAAUpC,IAClD2B,GAAa,GACQ,qCAPyC,SAQvCU,IAAMC,IAC3BC,2GAEA,CACEC,OAAQ,CAAExC,WAAYA,EAAYyC,aAAczC,KAZU,OAQxDC,EARwD,OAe9DsB,EAAmBtB,EAASyC,MAC5BjB,GAAe,GACfE,GAAa,GAjBiD,4CAAH,sDA8C/D,OAfAgB,qBAAU,YACyB,WAC/B,IAAMC,EAAuBX,aAAaY,QAAQ,cAC9CV,KAAKW,MAAMb,aAAaY,QAAQ,eAChC,KACJ1B,EAAcyB,GACdvB,EACEuB,GACoC,IAAlCA,EAAgBG,OAAOC,QACvBC,SAASC,SAASN,KAGxBO,KACC,IAGD,qCACE,cAAC,IAAD,CACEjD,MAAO,SACPC,QAAS,SACTiD,GAAIC,YAAkB,UAAW,YAHnC,SAKE,eAAC,IAAD,CAAOC,QAAS,EAAGC,GAAI,OAAQC,KAAM,KAAMC,GAAI,GAAIC,GAAI,EAAvD,UACE,cAAC,IAAD,CAAOxD,MAAO,SAAd,SACE,eAAC,IAAD,CAASyD,SAAU,MAAnB,qBACW,IACT,cAAC,IAAD,CAAMC,GAAI,OAAQC,MAAO,YAAzB,0BAKJ,cAAC,IAAD,CACEC,QAAS,KACTV,GAAIC,YAAkB,QAAS,YAC/BU,UAAW,KACXC,EAAG,EAJL,SAME,eAAC,IAAD,CAAOV,QAAS,EAAhB,UACE,eAAC,IAAD,WACE,cAAC,IAAD,0BACA,cAAC,IAAD,CACEW,KAAK,OACLC,WAAY9C,EACZ+C,MAAOnE,EACPoE,YAAa,oBACbC,SAvD4D,SAC1EvC,GAEAX,EAAcW,EAAMwC,OAAOH,OAC3B9C,EACuC,IAArCS,EAAMwC,OAAOH,MAAMpB,OAAOC,QACxBC,SAASC,SAASpB,EAAMwC,OAAOH,eAoDzB,cAAC,IAAD,CAAOb,QAAS,GAAhB,SACE,cAAC,IAAD,CACEW,KAAK,SACLM,UAAWnD,GAAqBM,EAChCX,QAASc,EACTuB,GAAI,WACJS,MAAO,QACPW,OAAQ,CACNpB,GAAI,YAPR,SAUG1B,EAAY,cAAC,IAAD,IAAc,8BAOtCJ,GACC,cAAC,EAAD,CACExB,OAAQ0B,EACRR,aA5GN,WACEY,KA4GIhC,QAASgC,EACT5B,WAAYA,EACZC,SAAUqB,Q,kCClJPmD,EAAsD,SAAC9E,GAClE,IAAQ+E,EAAoBC,cAApBD,gBACFE,EAAOvB,YAAkB,OAAQ,SACjCwB,EAAaxB,YAAkByB,IAAQC,KAE7C,OACE,cAAC,IAAD,aACEC,KAAK,KACLrB,SAAS,KACTnD,QAAQ,QACRqD,MAAM,UACNoB,WAAW,IACXlE,QAAS2D,EACTQ,KAAM,cAACL,EAAD,IACN,iCAAyBD,EAAzB,UACIjF,KCYKwF,EA3BU,SAACxF,GACxB,OACE,cAAC,IAAD,UACE,eAAC,IAAD,CACEyD,GAAIC,YAAkB,QAAS,YAC/BQ,MAAOR,YAAkB,WAAY,SACrC+B,KAAM,OACN3B,GAAI,CAAE4B,KAAM,GACZ3B,GAAI,CAAE2B,KAAM,GACZC,aAAc,EACdC,YAAa,QACbC,YAAanC,YAAkB,WAAY,YAC3CnD,MAAO,SATT,UAWE,cAAC,IAAD,CACEuF,UAAWC,YAAmB,CAAEL,KAAM,SAAUM,GAAI,SACpDC,WAAY,UACZ/B,MAAOR,YAAkB,WAAY,SAHvC,iCAOA,cAAC,EAAD,CAAmBwC,YAAY,mBCpBxBC,EAPsB,kBACnC,eAAC,IAAD,CAAgBC,MAAOA,QAAvB,UACE,cAAC,EAAD,IACA,cAAC,EAAD,QCHJC,IAASC,OACP,eAAC,aAAD,WACE,cAAC,IAAD,IACA,cAAC,EAAD,OAEFC,SAASC,eAAe,W","file":"static/js/main.3975ab76.chunk.js","sourcesContent":["import {\r\n  Alert,\r\n  AlertIcon,\r\n  Button,\r\n  Modal,\r\n  ModalBody,\r\n  ModalCloseButton,\r\n  ModalContent,\r\n  ModalFooter,\r\n  ModalHeader,\r\n  ModalOverlay,\r\n  Stat,\r\n  StatHelpText,\r\n  StatLabel,\r\n  StatNumber,\r\n  Table,\r\n  TableCaption,\r\n  Tbody,\r\n  Td,\r\n  Tfoot,\r\n  Th,\r\n  Thead,\r\n  Tr,\r\n} from \"@chakra-ui/react\";\r\nimport React from \"react\";\r\nimport { ResponseType } from \"../Form/Form\";\r\n\r\ninterface CardProps {\r\n  cardNumber: string;\r\n  response: null | ResponseType;\r\n  isOpen: boolean;\r\n  onModalClose: React.MouseEventHandler<HTMLButtonElement>;\r\n  onClose: () => void;\r\n}\r\n\r\nconst Card: React.FC<CardProps> = (props) => {\r\n  return (\r\n    <>\r\n      <Modal\r\n        onClose={props.onClose}\r\n        isCentered\r\n        isOpen={props.isOpen}\r\n        motionPreset=\"slideInBottom\"\r\n      >\r\n        <ModalOverlay />\r\n        <ModalContent>\r\n          <ModalHeader>Card # {props.cardNumber}</ModalHeader>\r\n          <ModalCloseButton />\r\n          <ModalBody>\r\n            {props.response && (\r\n              <>\r\n                <Stat align={\"center\"} justify={\"center\"}>\r\n                  <StatLabel>Card Balance</StatLabel>\r\n                  <StatNumber>â‚¹ {props.response.balance.toFixed(2)}</StatNumber>\r\n                  <StatHelpText>\r\n                    {props.response.lastUsedInGateOn} -{\" \"}\r\n                    {props.response.validUpto}\r\n                  </StatHelpText>\r\n                </Stat>\r\n                <Table variant=\"simple\">\r\n                  <TableCaption>Card Information</TableCaption>\r\n                  <Thead>\r\n                    <Tr>\r\n                      <Th>Description</Th>\r\n                      <Th>Value</Th>\r\n                    </Tr>\r\n                  </Thead>\r\n                  <Tbody>\r\n                    <Tr>\r\n                      <Td>starting location</Td>\r\n                      <Td>{props.response.startLocation}</Td>\r\n                    </Tr>\r\n                    <Tr>\r\n                      <Td>ending location</Td>\r\n                      <Td>{props.response.endLocation}</Td>\r\n                    </Tr>\r\n                    <Tr>\r\n                      <Td>card last used at</Td>\r\n                      <Td>{props.response.lastUsedInGateAtStn}</Td>\r\n                    </Tr>\r\n                  </Tbody>\r\n                  <Tfoot>\r\n                    <Tr>\r\n                      <Th>Description</Th>\r\n                      <Th>Value</Th>\r\n                    </Tr>\r\n                  </Tfoot>\r\n                </Table>\r\n                <Alert status=\"warning\">\r\n                  <AlertIcon />\r\n                  Current card information may vary. Please check at station for\r\n                  latest information.\r\n                </Alert>\r\n              </>\r\n            )}\r\n          </ModalBody>\r\n          <ModalFooter>\r\n            <Button colorScheme=\"blue\" mr={3} onClick={props.onModalClose}>\r\n              Close\r\n            </Button>\r\n          </ModalFooter>\r\n        </ModalContent>\r\n      </Modal>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Card;","/* eslint-disable react/jsx-no-undef */\r\nimport {\r\n  Box,\r\n  Button,\r\n  Flex,\r\n  FormControl,\r\n  FormLabel,\r\n  Heading,\r\n  Input,\r\n  Spinner,\r\n  Stack,\r\n  Text,\r\n  useColorModeValue,\r\n} from \"@chakra-ui/react\";\r\nimport axios from \"axios\";\r\nimport React from \"react\";\r\nimport { useEffect } from \"react\";\r\nimport { useState } from \"react\";\r\nimport Card from \"../Card/Card\";\r\n\r\nexport interface ResponseType {\r\n  balance: Number;\r\n  cardNumber: String;\r\n  endLocation: string;\r\n  endLocationIndex: number;\r\n  fmiNumber: string;\r\n  lastUsedInGateAtStn: string;\r\n  lastUsedInGateOn: string;\r\n  startLocation: string;\r\n  startLocationIndex: number;\r\n  statusCode: number;\r\n  strLastUsedInGateOn: string;\r\n  strValidUpto: string;\r\n  validUpto: string;\r\n}\r\n\r\nconst Form: React.FC = () => {\r\n  const [cardNumber, setCardNumber] = useState(\"\");\r\n  const [isCardNumberValid, setIsCardNumberValid] = useState(false);\r\n  const [balanceResponse, setBalanceResponse] = useState<null | ResponseType>(\r\n    null\r\n  );\r\n  const [isModalOpen, setIsModalOpen] = useState(false);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n\r\n  const onModalCloseHandler: React.MouseEventHandler<HTMLButtonElement> =\r\n    () => {\r\n      closeModal();\r\n    };\r\n\r\n  const closeModal = () => {\r\n    setIsModalOpen(false);\r\n  };\r\n\r\n  const submitHandler: React.MouseEventHandler<HTMLButtonElement> = async (\r\n    event\r\n  ) => {\r\n    event.preventDefault();\r\n    if (isCardNumberValid) {\r\n      localStorage.setItem(\"cardNumber\", JSON.stringify(cardNumber));\r\n      setIsLoading(true);\r\n      const corsAnyWhere = \"https://somrajproxy.herokuapp.com/\";\r\n      const response = await axios.get(\r\n        corsAnyWhere +\r\n          \"https://mtp.indianrailways.gov.in/KolkataMetroPG/CardBalanceAction.jsp\",\r\n        {\r\n          params: { cardNumber: cardNumber, reCardNumber: cardNumber },\r\n        }\r\n      );\r\n      setBalanceResponse(response.data);\r\n      setIsModalOpen(true);\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  const cardNumberChangeHandler: React.ChangeEventHandler<HTMLInputElement> = (\r\n    event\r\n  ) => {\r\n    setCardNumber(event.target.value);\r\n    setIsCardNumberValid(\r\n      event.target.value.trim().length === 9 &&\r\n        isFinite(parseInt(event.target.value))\r\n    );\r\n  };\r\n\r\n  useEffect(() => {\r\n    const getCardNumberFromStorage = () => {\r\n      const cardFromStorage: any = localStorage.getItem(\"cardNumber\")\r\n        ? JSON.parse(localStorage.getItem(\"cardNumber\") as any)\r\n        : null;\r\n      setCardNumber(cardFromStorage);\r\n      setIsCardNumberValid(\r\n        cardFromStorage &&\r\n          cardFromStorage.trim().length === 9 &&\r\n          isFinite(parseInt(cardFromStorage))\r\n      );\r\n    };\r\n    getCardNumberFromStorage();\r\n  }, []);\r\n\r\n  return (\r\n    <>\r\n      <Flex\r\n        align={\"center\"}\r\n        justify={\"center\"}\r\n        bg={useColorModeValue(\"gray.50\", \"gray.800\")}\r\n      >\r\n        <Stack spacing={8} mx={\"auto\"} maxW={\"lg\"} py={12} px={6}>\r\n          <Stack align={\"center\"}>\r\n            <Heading fontSize={\"4xl\"}>\r\n              See Your{\" \"}\r\n              <Text as={\"span\"} color={\"green.400\"}>\r\n                Balance\r\n              </Text>\r\n            </Heading>\r\n          </Stack>\r\n          <Box\r\n            rounded={\"lg\"}\r\n            bg={useColorModeValue(\"white\", \"gray.700\")}\r\n            boxShadow={\"lg\"}\r\n            p={8}\r\n          >\r\n            <Stack spacing={4}>\r\n              <FormControl>\r\n                <FormLabel>Card Number</FormLabel>\r\n                <Input\r\n                  type=\"text\"\r\n                  isInvalid={!isCardNumberValid}\r\n                  value={cardNumber}\r\n                  placeholder={\"Enter Card Number\"}\r\n                  onChange={cardNumberChangeHandler}\r\n                />\r\n              </FormControl>\r\n              <Stack spacing={10}>\r\n                <Button\r\n                  type=\"submit\"\r\n                  disabled={!isCardNumberValid || isLoading}\r\n                  onClick={submitHandler}\r\n                  bg={\"blue.400\"}\r\n                  color={\"white\"}\r\n                  _hover={{\r\n                    bg: \"blue.500\",\r\n                  }}\r\n                >\r\n                  {isLoading ? <Spinner /> : \"Check Balance\"}\r\n                </Button>\r\n              </Stack>\r\n            </Stack>\r\n          </Box>\r\n        </Stack>\r\n      </Flex>\r\n      {balanceResponse && (\r\n        <Card\r\n          isOpen={isModalOpen}\r\n          onModalClose={onModalCloseHandler}\r\n          onClose={closeModal}\r\n          cardNumber={cardNumber}\r\n          response={balanceResponse}\r\n        />\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Form;\r\n","import * as React from \"react\"\nimport {\n  useColorMode,\n  useColorModeValue,\n  IconButton,\n  IconButtonProps,\n} from \"@chakra-ui/react\"\nimport { FaMoon, FaSun } from \"react-icons/fa\"\n\ntype ColorModeSwitcherProps = Omit<IconButtonProps, \"aria-label\">\n\nexport const ColorModeSwitcher: React.FC<ColorModeSwitcherProps> = (props) => {\n  const { toggleColorMode } = useColorMode()\n  const text = useColorModeValue(\"dark\", \"light\")\n  const SwitchIcon = useColorModeValue(FaMoon, FaSun)\n\n  return (\n    <IconButton\n      size=\"md\"\n      fontSize=\"lg\"\n      variant=\"ghost\"\n      color=\"current\"\n      marginLeft=\"2\"\n      onClick={toggleColorMode}\n      icon={<SwitchIcon />}\n      aria-label={`Switch to ${text} mode`}\n      {...props}\n    />\n  )\n}\n","/* eslint-disable react-hooks/rules-of-hooks */\r\nimport {\r\n  Box,\r\n  Flex,\r\n  Text,\r\n  useBreakpointValue,\r\n  useColorModeValue,\r\n} from \"@chakra-ui/react\";\r\nimport React from \"react\";\r\nimport { ColorModeSwitcher } from \"../../ColorModeSwitcher\";\r\n\r\nconst Header: React.FC = (props) => {\r\n  return (\r\n    <Box>\r\n      <Flex\r\n        bg={useColorModeValue(\"white\", \"gray.800\")}\r\n        color={useColorModeValue(\"gray.600\", \"white\")}\r\n        minH={\"60px\"}\r\n        py={{ base: 2 }}\r\n        px={{ base: 4 }}\r\n        borderBottom={1}\r\n        borderStyle={\"solid\"}\r\n        borderColor={useColorModeValue(\"gray.200\", \"gray.900\")}\r\n        align={\"center\"}\r\n      >\r\n        <Text\r\n          textAlign={useBreakpointValue({ base: \"center\", md: \"left\" })}\r\n          fontFamily={\"heading\"}\r\n          color={useColorModeValue(\"gray.800\", \"white\")}\r\n        >\r\n          Kolkata Metro Buddy\r\n        </Text>\r\n        <ColorModeSwitcher justifySelf=\"flex-end\" />\r\n      </Flex>\r\n    </Box>\r\n  );\r\n};\r\n\r\nexport default Header;\r\n","import { ChakraProvider, theme } from \"@chakra-ui/react\";\r\nimport * as React from \"react\";\r\nimport Form from \"./components/Form/Form\";\r\nimport Header from \"./components/Header/Header\";\r\n\r\nconst App: React.FunctionComponent = () => (\r\n  <ChakraProvider theme={theme}>\r\n    <Header />\r\n    <Form />\r\n  </ChakraProvider>\r\n);\r\n\r\nexport default App;\r\n","import { ColorModeScript } from \"@chakra-ui/react\";\nimport * as React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <ColorModeScript />\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}